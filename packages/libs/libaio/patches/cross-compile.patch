diff --git a/Makefile b/Makefile
index e9dbdb0505a4..a4d11a2cd884 100644
--- a/Makefile
+++ b/Makefile
@@ -7,6 +7,7 @@ RPMBUILD=$(shell `which rpmbuild >&/dev/null` && echo "rpmbuild" || echo "rpm")
 prefix=/usr
 includedir=$(prefix)/include
 libdir=$(prefix)/lib
+DESTDIR=
 
 default: all
 
@@ -14,7 +15,7 @@ all:
 	@$(MAKE) -C src
 
 install:
-	@$(MAKE) -C src install prefix=$(prefix) includedir=$(includedir) libdir=$(libdir)
+	@$(MAKE) -C src install prefix=$(prefix) includedir=$(includedir) libdir=$(libdir) DESTDIR=$(DESTDIR)
 
 check:
 	@$(MAKE) -C harness check
diff --git a/src/Makefile b/src/Makefile
index eadb336b47e3..c662238c6430 100644
--- a/src/Makefile
+++ b/src/Makefile
@@ -2,7 +2,7 @@ prefix=/usr
 includedir=$(prefix)/include
 libdir=$(prefix)/lib
 
-CFLAGS ?= -g -fomit-frame-pointer -O2
+CFLAGS ?= -g -fomit-frame-pointer -O2 $(EXTRA_CFLAGS)
 CFLAGS += -nostdlib -nostartfiles -Wall -I. -fPIC
 SO_CFLAGS=-shared $(CFLAGS)
 L_CFLAGS=$(CFLAGS)
@@ -53,11 +53,11 @@ $(libname): $(libaio_sobjs) libaio.map
 	$(CC) $(SO_CFLAGS) -Wl,--version-script=libaio.map -Wl,-soname=$(soname) -o $@ $(libaio_sobjs) $(LINK_FLAGS)
 
 install: $(all_targets)
-	install -D -m 644 libaio.h $(includedir)/libaio.h
-	install -D -m 644 libaio.a $(libdir)/libaio.a
-	install -D -m 755 $(libname) $(libdir)/$(libname)
-	ln -sf $(libname) $(libdir)/$(soname)
-	ln -sf $(libname) $(libdir)/libaio.so
+	install -D -m 644 libaio.h $(DESTDIR)$(includedir)/libaio.h
+	install -D -m 644 libaio.a $(DESTDIR)$(libdir)/libaio.a
+	install -D -m 755 $(libname) $(DESTDIR)$(libdir)/$(libname)
+	ln -sf $(libname) $(DESTDIR)$(libdir)/$(soname)
+	ln -sf $(libname) $(DESTDIR)$(libdir)/libaio.so
 
 $(libaio_objs): libaio.h
 
